# 5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения.
 
 Задача 1
Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.
Ответ: 
1. Полная (аппаратная) виртуализация используется в том случае, если под виртуализацию полностью отдан железный сервер. Не требуется отдельная хостовая ОС, позволяет лучше использовать аппаратные ресурсы. 
2. Паравиртуализация - самый универсальный тип виртуализации, можно запускать любые ВМ на любой машине, поддерживающей виртуализацию аппаратно. Не требуются сложные манипуляции для подготовки аппаратной части для работы с ВМ, установить гипервизор и запустить ВМ можно просто как ещё одни приложения. В отличие от полной виртуализации требует больше ресурсов для запуска хостовой ОС.
3. Виртуализация уровня ОС - запускаются на уровне ОС, то есть часть функционала виртуализации отдано ОС. Из-за лучшей совместимости запускаемых ОС на ВМ и хостовой ВМ, можно ожидать более стабильную работу (в сравнении с паравиртуализацией).

Задача 2: 
Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.
Организация серверов:
физические сервера,
паравиртуализация,
виртуализация уровня ОС.

Условия использования (ответ и обоснование - через тире):

Высоконагруженная база данных, чувствительная к отказу. - Кластер физических серверов. Обеспечит хороший запас и хорошую утилизацию ресурсов, отказоустойчивость обеспечивается наличием кластера. 

Различные web-приложения. - Любой тип подойдёт. Зависит от бюджета и количества приложений, если можно закупить целый сервер под web-приложения, то аппаратное - лучшее решение. Если принимаются все ограничения виртуализации уровня ОС (что можно работать только с имеющимся ядром) - можно использовать виртуализацию уровня ОС. Если разворачиваемых ВМ немного, можно развернуть веб-приложения в режиме паравиртуализации на существующем сервере.

Windows системы для использования бухгалтерским отделом. - виртуализация уровня ОС, на Hyper-V. Обеспечит лучшую интеграцию гостевой и хостовой ОС, более стабильную работу. 

Системы, выполняющие высокопроизводительные расчеты на GPU. - аппаратная виртуализация либо виртуализация уровня ОС. Есть решения для работы с GPU для этих двух типов. Паравиртуализацию использовать не стал бы, т.к. лишние расходы ресурсов на хост-ОС + гипервизор. 

Задача 3: 

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии (ответ и обоснование - через тире):

100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий. - VMWare или Hyper-V. Linux и Windows дистрибутивы поддерживаются обоими решениями. Программные NLB (F5, Citrix VPX, KEMP) поддерживаются обоими гипервизорами, репликация и резервное копирование - тоже. Коммерческий продукт обеспечил бы лучшую поддержку вендора.
При отсутствии возможности закупить поддержку лучшим решением будет KVM, с подбором NLB и решений для репликации и резервных копий. 

Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин. - KVM - бесплатное решение, Linux и Windows поддерживаются. 

Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры. - нативный Hyper-V в Windows 10. Нет дополнительных затрат (если уже установлена Windows), максимально совместимое с Windows решение. 

Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux. - KVM или Docker. Бесплатные окружения, с лучшей совместимостью с Linux. 

Задача 4. 
Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. 
1. Необходимость экспертизы для управления всеми средами одновременно. 
2. Разная архитектура виртуальных сред означает ограничения в миграции ВМ между хостами разных гипервизоров. 
3. Разные условия совмемстимости разных программных продуктов, например, наиболее полная поддержка NLB Citrix VPX - на VMWare, самая ограниченная - на Hyper-V.  https://docs.citrix.com/en-us/citrix-adc/current-release/deploying-vpx/supported-hypervisors-features-limitations.html

Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? 
Не создавал бы. Держал бы ВМ по-максимуму в одной масштабируемой и отказоустойчивой инфраструктуре, остальные решения подбирал бы исходя из совместимости с виртуальной инфраструктурой. 
